/* auto-generated by NAPI-RS */
/* eslint-disable */
export declare class TuiSession {
  wait(): Promise<TuiExitInfo>
  shutdown(): void
  get closed(): boolean
}

export declare function callToolBuiltin(token: string, invocation?: JsToolInvocation): Promise<NativeToolResponse>

export declare function clearRegisteredTools(): void

export declare function cloudTasksApply(taskId: string, diffOverride?: string | undefined | null, baseUrl?: string | undefined | null, apiKey?: string | undefined | null): Promise<string>

export declare function cloudTasksApplyPreflight(taskId: string, diffOverride?: string | undefined | null, baseUrl?: string | undefined | null, apiKey?: string | undefined | null): Promise<string>

export declare function cloudTasksCreate(envId: string, prompt: string, gitRef?: string | undefined | null, qaMode?: boolean | undefined | null, bestOfN?: number | undefined | null, baseUrl?: string | undefined | null, apiKey?: string | undefined | null): Promise<string>

export declare function cloudTasksGetDiff(taskId: string, baseUrl?: string | undefined | null, apiKey?: string | undefined | null): Promise<string>

export declare function cloudTasksList(envFilter?: string | undefined | null, baseUrl?: string | undefined | null, apiKey?: string | undefined | null): Promise<string>

export declare function compactThread(req: RunRequest): Promise<Array<string>>

export declare function emitBackgroundEvent(req: JsEmitBackgroundEventRequest): void

export declare function emitPlanUpdate(req: JsEmitPlanUpdateRequest): void

export declare function evAssistantMessage(id: string, text: string): string

export declare function evCompleted(id: string): string

export declare function evFunctionCall(callId: string, name: string, args: string): string

export declare function evResponseCreated(id: string): string

export declare function fastEmbedEmbed(req: FastEmbedEmbedRequest): Promise<Array<Array<number>>>

export interface FastEmbedEmbedRequest {
  inputs: Array<string>
  batchSize?: number
  normalize?: boolean
  projectRoot?: string
  cache?: boolean
}

export declare function fastEmbedInit(opts: FastEmbedInitOptions): Promise<void>

export interface FastEmbedInitOptions {
  model?: string
  cacheDir?: string
  maxLength?: number
  showDownloadProgress?: boolean
}

export interface ForkRequest {
  threadId: string
  nthUserMessage?: number
  model?: string
  oss?: boolean
  sandboxMode?: string
  approvalMode?: string
  workspaceWriteOptions?: WorkspaceWriteOptions
  workingDirectory?: string
  skipGitRepoCheck?: boolean
  baseUrl?: string
  apiKey?: string
  linuxSandboxPath?: string
  fullAuto?: boolean
}

export interface ForkResult {
  threadId: string
  rolloutPath: string
}

export declare function forkThread(req: ForkRequest): Promise<ForkResult>

export interface JsApprovalRequest {
  type: string
  details?: JsonValue
}

export interface JsEmitBackgroundEventRequest {
  threadId: string
  message: string
}

export interface JsEmitPlanUpdateRequest {
  threadId: string
  explanation?: string
  plan: Array<JsPlanItem>
}

export interface JsModifyPlanRequest {
  threadId: string
  operations: Array<JsPlanOperation>
}

export interface JsPlanItem {
  step: string
  status?: string
}

export interface JsPlanOperation {
  type: string
  item?: JsPlanItem
  index?: number
  updates?: JsPlanUpdate
  newOrder?: Array<number>
}

export interface JsPlanUpdate {
  step?: string
  status?: string
}

export interface JsToolInterceptorContext {
  invocation: JsToolInvocation
  token: string
}

export interface JsToolInvocation {
  callId: string
  toolName: string
  arguments?: string
  input?: string
}

export declare function modifyPlan(req: JsModifyPlanRequest): void

export interface NativeToolInfo {
  name: string
  description?: string
  parameters?: JsonValue
  strict?: boolean
  supportsParallel?: boolean
}

export interface NativeToolResponse {
  output?: string
  success?: boolean
  error?: string
}

export declare function registerApprovalCallback(handler: (request: JsApprovalRequest) => boolean | Promise<boolean>): void

export declare function registerTool(info: NativeToolInfo, handler: (call: JsToolInvocation) => NativeToolResponse | Promise<NativeToolResponse>): void

export declare function registerToolInterceptor(toolName: string, handler: (context: JsToolInterceptorContext) => NativeToolResponse | Promise<NativeToolResponse>): void

export interface ReverieConversation {
  id: string
  path: string
  createdAt?: string
  updatedAt?: string
  headRecords: Array<string>
  tailRecords: Array<string>
}

export declare function reverieGetConversationInsights(conversationPath: string, query?: string | undefined | null): Promise<Array<string>>

export declare function reverieListConversations(codexHomePath: string, limit?: number | undefined | null, offset?: number | undefined | null): Promise<Array<ReverieConversation>>

export declare function reverieSearchConversations(codexHomePath: string, query: string, limit?: number | undefined | null): Promise<Array<ReverieSearchResult>>

export interface ReverieSearchResult {
  conversation: ReverieConversation
  relevanceScore: number
  matchingExcerpts: Array<string>
  insights: Array<string>
}

export interface RunRequest {
  prompt: string
  threadId?: string
  images?: Array<string>
  model?: string
  oss?: boolean
  sandboxMode?: string
  approvalMode?: string
  workspaceWriteOptions?: WorkspaceWriteOptions
  reviewMode?: boolean
  reviewHint?: string
  workingDirectory?: string
  skipGitRepoCheck?: boolean
  outputSchema?: JsonValue
  baseUrl?: string
  apiKey?: string
  linuxSandboxPath?: string
  fullAuto?: boolean
}

export declare function runThread(req: RunRequest): Promise<Array<string>>

export declare function runThreadStream(req: RunRequest, onEvent: (err: unknown, eventJson?: string) => void): Promise<void>

export declare function runTui(req: TuiRequest): Promise<TuiExitInfo>

export declare function sse(events: Array<string>): string

export declare function startTui(req: TuiRequest): TuiSession

export interface TokenizerBaseOptions {
  model?: string
  encoding?: "o200k_base" | "cl100k_base"
}

export declare function tokenizerCount(text: string, options?: TokenizerBaseOptions | undefined | null): number

export declare function tokenizerDecode(tokens: Array<number>, options?: TokenizerBaseOptions | undefined | null): string

export declare function tokenizerEncode(text: string, options?: TokenizerEncodeOptions | undefined | null): Array<number>

export interface TokenizerEncodeOptions {
  model?: string
  encoding?: "o200k_base" | "cl100k_base"
  withSpecialTokens?: boolean
}

export interface TokenUsageSummary {
  inputTokens: number
  cachedInputTokens: number
  outputTokens: number
  reasoningOutputTokens: number
  totalTokens: number
}

export interface TuiExitInfo {
  tokenUsage: TokenUsageSummary
  conversationId?: string
  updateAction?: UpdateActionInfo
}

export interface TuiRequest {
  prompt?: string
  images?: Array<string>
  model?: string
  oss?: boolean
  sandboxMode?: string
  approvalMode?: string
  resumeSessionId?: string
  resumeLast?: boolean
  resumePicker?: boolean
  fullAuto?: boolean
  dangerouslyBypassApprovalsAndSandbox?: boolean
  workingDirectory?: string
  configProfile?: string
  configOverrides?: Array<string>
  addDir?: Array<string>
  webSearch?: boolean
  linuxSandboxPath?: string
  baseUrl?: string
  apiKey?: string
}

export interface TuiTestRequest {
  width: number
  height: number
  viewport: TuiTestViewport
  lines: Array<string>
}

export declare function tuiTestRun(req: TuiTestRequest): Array<string>

export interface TuiTestViewport {
  x: number
  y: number
  width: number
  height: number
}

export interface UpdateActionInfo {
  kind: string
  command: string
}

export interface WorkspaceWriteOptions {
  networkAccess?: boolean
  writableRoots?: Array<string>
  excludeTmpdirEnvVar?: boolean
  excludeSlashTmp?: boolean
}
